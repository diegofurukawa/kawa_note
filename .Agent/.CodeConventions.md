# CODE CONVENTIONS

## Padrões de Linguagem e Framework
- **Linguagem:** JavaScript (ESNext).
- **Framework:** React 18+ com Vite.
- **Componentes:** Funcionais com Hooks.
- **Estilização:** Tailwind CSS.

## Organização de Arquivos
- **Componentes UI:** `src/components/ui/` (Shadcn UI).
- **Componentes de Negócio:** `src/components/notes/`, `src/components/layout/`.
- **Componentes Providers:** `src/components/providers/` (AuthContext, NavigationTracker, etc).
- **Hooks:** `src/hooks/`.
- **Bibliotecas/Contextos:** `src/lib/` (apenas código não-React: utilitários, helpers, constantes).
- **Páginas:** `src/pages/`.
- **Entidades:** `entities/`.

## Regras de Código (ESLint)
- **Variáveis não utilizadas:** Devem ser removidas ou prefixadas com `_`.
- **Importações:** Usar plugin `unused-imports` para manter o código limpo.
- **React:** Não é necessário importar `React` em escopo JSX (React 17+ pattern).
- **Hooks:** Seguir rigorosamente `rules-of-hooks`.
- **Path Aliases:** Validar com `eslint-plugin-import` regra `import/no-unresolved`.

## Convenções de Nomenclatura
- **Arquivos de Componente:** PascalCase (ex: `NoteEditor.jsx`).
- **Hooks:** camelCase com prefixo `use` (ex: `useMobile.jsx`).
- **Arquivos Utilitários:** camelCase ou lowercase (ex: `utils.js`).

## Caminhos (Aliases)
- Utilizar `@/*` para referenciar o diretório `./src/`.

## Gerenciamento de Estado e Dados
- Utilizar `@tanstack/react-query` para fetching e cache de dados.
- Utilizar `react-hook-form` com `zod` para validação de formulários.

## Validação de Ambiente
- **Frontend:** Criar arquivo `src/lib/env.js` com schema Zod para validação de variáveis de ambiente.
- **Variáveis a validar:** `VITE_APP_NAME`, `VITE_KAWA_APP_ID`, `VITE_KAWA_FUNCTIONS_VERSION`, `VITE_KAWA_APP_BASE_URL`.
- **Importar e validar em:** `src/main.jsx` ou `src/App.jsx` antes de inicializar aplicação.
- **Padrão:** Seguir implementação em `backend/src/config/env.js` para paridade entre camadas.

## Documentação JSDoc
- **Componentes:** Adicionar bloco JSDoc descrevendo props e retorno.
- **Padrão:** `/** @param {Type} name - Description */ export function ComponentName(...) {}`
- **Validação:** Executar `npm run typecheck` para validar JSDoc.

## Testes
- **Framework:** Vitest com @testing-library/react.
- **Estrutura:** Testes em `src/__tests__/` espelhando estrutura de `src/`.
- **Nomenclatura:** `*.test.js` ou `*.spec.js`.
- **Cobertura Mínima:** 80% (linhas, funções, branches, statements).
- **Hooks Críticos:** Implementar testes para `useAuth`, `useNotes`, `useFolders`, `useMobile`.
- **Executar:** `npm run test` (watch mode) ou `npm run test:run` (single run).
- **Coverage:** `npm run test:coverage` para gerar relatório de cobertura.
